# 詳細な仕様

## ページ共通

- ヘッダーの検索バーから地域を検索し、その地域の天気を表示できる
    - 検索バーのクリックでダイアログが表示され、地域名や経緯度を入力するとリアルタイムでAPIを叩いて地域を検索できる
        - Cmd+kやCtrl+kキーでもダイアログを開くことができる
        - 入力のたびにAPIリクエストを送るのではなく、debounceを実装して最後に入力されてから350msにリクエストを送るようにしている
    - 検索結果はリンクになっており、クリックやフォーカスを合わせてエンターを押すことで遷移することができる
        - 遷移先は現在いるページに応じて変わり、現在の天気ページならその地域の現在の天気、指定日の天気ページならその地域の指定日の天気ページに遷移する
            - どこに遷移するのかがわかりやすいように、検索バーには「現在の天気を知りたい地域を検索」「2月2日の天気を知りたい地域を検索」のようなメッセージを表示する
    - 未検索時、地域が見つからなかったとき、エラーが発生したときにはダイアログの中に対応するメッセージを表示する
    - 検索中であることがわかりやすいようにインジケーターを表示する
    - 検索ダイアログはキーボードで操作することができ、入力中にもキーボードのUpとDownで検索結果にフォーカスを当てて、Enterで遷移することができる
    - 画面幅が大きいときはダイアログを画面の中央に配置し、画面幅が小さいときは全画面に表示する
        - 全画面に表示されているときには、検索欄の隣にキャンセルボタンを配置してダイアログが閉じられるようにする

- ヘッダーには、ホーム画面へ戻るボタンが配置されている
    - ホーム画面にいるときには見た目が変わり、ホーム画面にいることがわかりやすいようにしている

- 各ページでハンドリングしないエラーは、カスタムエラーページを使用して知らせる
    - 誤ったURLでエラーが発生している可能性があるため、ホーム画面へのリンクを用意する

- 天気情報取得に使用しているWeatherAPIへのリクエストは基本的にはRSCから行い、フロントエンドにAPI Keyを露出しないようにする
    - 検索ダイアログなど、フロントエンドからリクエストを行う必要がある際にはNext.jsのRoute HandlerでAPIを実装する

## ホームページ

- 検索バーから地域を検索できること、ショートカットキーでも開けることを伝えるメッセージを表示する

## 現在の天気ページ

- 検索された地域の現在の天気情報が表示されている
    - 今日の天気ページ(指定日の天気ページ)に遷移することができる

- 検索された地域の今後の天気情報が表示されている
    - (2025年2月10日までは使用しているWeatherAPIのトライアルプランに加入しているため、今日も含めて最大14日表示できるが、それ以降は3日間表示される)
    - 今後の天気は画面幅が大きいときは1行に情報が表示されるが、画面幅が小さくなると2行に情報が表示される
    - その日の天気ページ(指定日の天気ページ)に遷移することができる
    - 日付ではなく曜日を強調して、直感的にわかりやすいようにしている

- それぞれの天気情報はリンクになっており、クリックすることで指定日の天気ページに遷移できる
    - 天気情報の中に「詳細を見る」や、右向きの矢印を配置することでクリック可能であることがわかりやすいようにしている
    - それぞれの天気情報をborderで囲むことで、クリック可能なエリアがわかりやすいようにしている
    - hoverメディア特性を使用してPCではホバーでスタイルを当て、モバイルでは:activeでスタイルを当てている

- ページの上部に「<地域名> の天気予報」という見出し要素が表示される

- このページのURLは、`/<locationId>`で、検索した地域のidがURLに含まれている

## 指定日の天気ページ

- 指定された日付の指定された日の天気情報が1時間ごとに表示されている
    - テーブルになっており、左から時間、天候のアイコン、気温などの順に並んでいる
        - 画面の幅が小さくなると右から隠れていくので、重要だと思う情報を左に配置している

- ページの上部に「地域名 > 2月2日」という見出し要素が表示されている
    - 地域名はリンクになっており、その地域の現在の天気ページに遷移する

- このページのURLは、`/<locationId>/yyyy-MM-dd`で、地域のidと日付がURLに含まれている
